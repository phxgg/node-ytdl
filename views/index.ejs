<%- include('partials/header') %>

<% if (err) { %>
<div class="alert alert-danger"><%= err %></div>
<% } %>

<!-- yt loading -->
<div id="yt-loading" class="alert alert-info" style="text-align: center; display: none;" role="status">
    Loading video info...
</div>

<!-- yt video info -->
<div class="card border-primary mb-3" id="yt-videoinfo" style="display: none;">
    <div class="row no-gutters">
        <div class="col-md-4" id="yt-thumbnail" style="padding: 5px;">
            <!-- img src -->
        </div>
        <div class="col-md-8">
            <div class="card-body">
                <h5 class="card-title" id="yt-title"><i class="text-muted">Title</i></h5>
                <p class="card-text">
                    
                    <i class="text-muted" id="yt-views">Views</i><br>

                    <div class="progress">
                        <!-- like percentage -->
                        <div
                            class="progress-bar progress-bar-striped bg-success"
                            role="progressbar"
                            id="yt-likeperc"
                            aria-valuemin="0"
                            aria-valuemax="100"
                            data-toggle="tooltip"
                            data-placement="bottom"
                            title="">
                        </div>

                        <!-- dislike percentage -->
                        <div
                            class="progress-bar progress-bar-striped bg-danger"
                            role="progressbar"
                            id="yt-dislikeperc"
                            style="width: 0%;"
                            aria-valuenow="0"
                            aria-valuemin="0"
                            aria-valuemax="100"
                            data-toggle="tooltip"
                            data-placement="bottom"
                            title="">
                        </div>
                    </div>

                    <i class="text-success" id="yt-likes">Likes</i> /
                    <i class="text-danger" id="yt-dislikes">Dislikes</i>
                </p>
            </div>
        </div>
    </div>
</div>

<% if(url) { %>
<div class="alert alert-info">Your link is already filled in :) Just click <b>Convert</b>!</div>
<% } %>

<form action="/convert" method="post">
    <!-- csrf token -->
    <input type="hidden" name="_csrf" value="<%= csrfToken %>">
    
    <!-- socket id -->
    <input type="hidden" name="socketId" value="">

    <!-- form -->
    <div class="input-group mb-3">
        <input type="text" name="url" id="url" class="form-control" data-toggle="tooltip" data-placement="top" title="" placeholder="YouTube Link" aria-describedby="btnConvert" value="<%= url %>" required>
        <div class="input-group-append">
            <input type="submit" name="convert" id="btnConvert" class="btn btn-outline-success" value="Convert">
        </div>
    </div>

    <small class="text-danger" id="labelInvalidLink" style="display: none;">
        Invalid YouTube Link.
    </small>

    <h6>quality</h6>
    
    <div class="input-group" id="qualityRadio">
        <div class="custom-control custom-radio custom-control-inline">
            <input type="radio" class="custom-control-input" id="customRadio" name="quality" value="mp3low" checked>
            <label class="custom-control-label" for="customRadio" data-toggle="tooltip" data-placement="bottom" title="Lower quality, smaller file.">MP3 regular</label>
        </div>
        <div class="custom-control custom-radio custom-control-inline">
            <input type="radio" class="custom-control-input" id="customRadio2" name="quality" value="mp3best">
            <label class="custom-control-label" for="customRadio2" data-toggle="tooltip" data-placement="bottom" title="Best possible quality, big file.">MP3 best possible</label>
        </div>
        <!--<div class="custom-control custom-radio custom-control-inline">
            <input type="radio" class="custom-control-input" id="customRadio3" name="quality" value="mp4video">
            <label class="custom-control-label" for="customRadio3" data-toggle="tooltip" data-placement="bottom" title="Regular quality.">MP4 video <span class="badge badge-warning">BETA</span></span></label>
        </div>-->
    </div>
    <br>

    <!-- hidden download button -->
    <center><a class="btn btn-outline-success" href="#" id="btnDownload" style="display: none;">Download!</a></center>

    <!-- loading thing -->
    <center>
    <div id="loading" class="spinner-border text-success" style="display: none;" role="status">
        <span class="sr-only">Loading...</span>
    </div>
    </center>
</form>

<%- include('partials/footer') %>